apply plugin:'application'

group 'com.reign'
version '0.8.5-SNAPSHOT-20230315a'

repositories {
    mavenCentral()
    maven {
        url('https://m2.dv8tion.net/releases')
        }
    maven { url('https://jitpack.io') }
}

dependencies {
    testImplementation 'junit:junit:4.13.2'
    testImplementation('org.junit.jupiter:junit-jupiter-api:5.9.2')
    testRuntimeOnly('org.junit.jupiter:junit-jupiter-engine:5.9.2')

    implementation("net.dv8tion:JDA:5.0.0-alpha.13")

    implementation('com.github.walkyst:lavaplayer-fork:1.3.99.1')
    implementation('com.github.Topis-Lavalink-Plugins:Topis-Source-Managers:2.0.7')
    implementation group: 'net.java.dev.jna', name: 'jna', version: '5.7.0'
    implementation group: 'com.alphacephei', name: 'vosk', version: '0.3.38'

    implementation('org.slf4j:slf4j-api:2.0.5')
    implementation('ch.qos.logback:logback-classic:1.4.5')

    implementation('com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.14.2')
    implementation('com.fasterxml.jackson.core:jackson-databind:2.14.2')

    implementation('de.vandermeer:asciitable:0.3.2')

    implementation('org.jsoup:jsoup:1.15.4')
}

test {
    useJUnitPlatform()
}

jar {
    manifest {
        attributes "Main-Class": "com.reign.kat.Main"
        archiveBaseName.set("kat")
    }

    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

task(runMain, dependsOn: 'jar', type: JavaExec) {
    main = 'com.reign.kat.Main'
    classpath = sourceSets.main.runtimeClasspath
}